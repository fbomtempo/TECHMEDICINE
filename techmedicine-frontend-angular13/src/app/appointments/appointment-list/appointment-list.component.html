<div *ngIf="appointments; else loadingError">
  <div class="col-md-12">
    <h1 class="text-center pb-4">Agendamentos</h1>
  </div>
  <div class="row">
    <div class="col">
      <a type="button" class="btn btn-primary" [routerLink]="['novo']">Novo Agendamento <i
          class="fas fa-plus-circle"></i></a>
    </div>
    <!--<div class="col-xxl-6 col-xl-6 col-lg-8 col-md-8 col-sm-12 col-xs-12 mt-md-0 mt-2">
      <form class="d-flex">
        <input class="form-control me-2" type="search"
          placeholder="Digite o nome do paciente" aria-label="Search" id="busca" #filterInput
          [value]="filter ? filter : ''">
        <button type="submit" class="btn btn-search search" (click)="setFilter(filterInput.value)"><i
            class="fas fa-search"></i></button>
        <button type="button" class="btn btn-clear clear ms-2" (click)="onClearFilter(filterInput)">Limpar</button>
      </form>
    </div>-->
  </div>
  <div class="table-responsive">
    <table class="mt-3 table table-striped table-hover align-middle table-responsive">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">ID</th>
          <th scope="col">Data</th>
          <th scope="col">Hor√°rio</th>
          <th scope="col">Paciente</th>
        </tr>
      </thead>
      <tbody class="table-link">
        <tr *ngFor="let appointment of onShowData(appointments) | pagination: page:itemsPerPage; let i = index">
          <th scope="row">{{ (i + 1) + (page - 1) * itemsPerPage }}</th>
          <td>{{ appointment.id }}</td>
          <td>{{ appointment.scheduledTimestamp }}</td>
          <td>{{ appointment.endTimestamp }}</td>
          <td>{{ appointment.patient.name + ' ' + appointment.patient.surname }}</td>
          <td>
            <button type="button" class="btn btn-round btn-outline-edit me-2" [routerLink]="['editar/', appointment.id]"><i
                class="fas fa-pencil-alt"></i></button>
            <button type="button" class="btn-round btn-outline-delete me-2" (click)="onDelete(appointment)"><i
                class="fas fa-trash-alt"></i></button>
            <button type="button" class="btn-round btn-outline-view" [routerLink]="['visualizar/', appointment.id]"><i
                class="fas fa-eye"></i></button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="mb-3 d-flex justify-content-center">
    <pagination [totalItems]="onShowData(appointments).length" [maxSize]="paginationSize"
      (pageChanged)="pageChanged($event)" [(ngModel)]="currentPage" [boundaryLinks]="true" previousText="&lsaquo;"
      nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;">
    </pagination>
    <br>
  </div>
</div>

<ng-template #loadingError>
  <div *ngIf="error | async">
    <div style="height: 80vh" class="d-flex flex-column align-items-center justify-content-center">
      <p style="font-size: 1.65rem;">Erro ao carregar appointments.</p>
      <button type="button" class="btn btn-lg btn-secondary" (click)="reloadPage()">Tentar Novamente <i
          class="fas fa-sync-alt"></i></button>
    </div>
  </div>
</ng-template>
