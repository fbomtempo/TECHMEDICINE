<div *ngIf="specialties$ | async as specialties; else loadingError">
  <div class="row">
    <div class="pt-4 pb-md-0 pb-3 col-md-3">
      <a class="fs-5 display-1 back" (click)="onHome()"
        ><i class="fas fa-home"></i><span class="ms-2">Home</span></a
      >
    </div>
    <h1 class="text-center pb-5">Cadastro de Especialidades</h1>
  </div>
  <div class="row">
    <div class="col-xl-6 col-lg-8 col-md-8 col-sm-12 col-xs-12 mt-md-0 mt-2">
      <div class="d-flex">
        <input
          class="form-control"
          type="search"
          placeholder="Digite a descrição da especialidade"
          aria-label="Search"
          id="search"
          [(ngModel)]="filter"
          (input)="onFilterInput()"
        />
        <button
          type="button"
          class="btn btn-clear clear ms-2"
          (click)="clearFilter()"
        >
          Limpar
        </button>
      </div>
    </div>
    <div class="col text-md-end text-sm-start text-start pt-md-0 pt-sm-4 pt-4">
      <a type="button" class="btn btn-primary" [routerLink]="['novo']"
        >Nova Especialidade <i class="fas fa-plus-circle"></i
      ></a>
    </div>
  </div>
  <div class="table-responsive">
    <table
      class="mt-3 table table-striped table-hover align-middle table-responsive"
    >
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">ID</th>
          <th scope="col">Descrição</th>
          <th scope="col">Ações</th>
        </tr>
      </thead>
      <tbody class="table-link">
        <tr
          *ngFor="
            let specialty of showData(specialties)
              | pagination: page:itemsPerPage;
            let i = index
          "
        >
          <th scope="row">{{ i + 1 + (page - 1) * itemsPerPage }}</th>
          <td>{{ specialty.id }}</td>
          <td>{{ specialty.description }}</td>
          <td>
            <button
              type="button"
              title="Editar"
              class="btn btn-round btn-outline-edit me-2"
              [routerLink]="['editar/', specialty.id]"
            >
              <i class="fas fa-pencil-alt"></i>
            </button>
            <button
              type="button"
              title="Deletar"
              class="btn-round btn-outline-delete me-2"
              (click)="onDelete(specialty)"
            >
              <i class="fas fa-trash-alt"></i>
            </button>
            <button
              type="button"
              title="Visualizar"
              class="btn-round btn-outline-view"
              [routerLink]="['visualizar/', specialty.id]"
            >
              <i class="fas fa-eye"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="mb-3 d-flex justify-content-center">
    <pagination
      [totalItems]="showData(specialties).length"
      [maxSize]="paginationSize"
      [itemsPerPage]="itemsPerPage"
      (pageChanged)="pageChanged($event)"
      [(ngModel)]="currentPage"
      [boundaryLinks]="true"
      previousText="&lsaquo;"
      nextText="&rsaquo;"
      firstText="&laquo;"
      lastText="&raquo;"
    >
    </pagination>
    <br />
  </div>
</div>

<ng-template #loadingError>
  <div *ngIf="error | async; else loading">
    <div
      style="height: 80vh"
      class="d-flex flex-column align-items-center justify-content-center"
    >
      <p style="font-size: 1.65rem">Erro ao carregar especialidades.</p>
      <button
        type="button"
        class="btn btn-lg btn-secondary"
        (click)="reloadPage()"
      >
        Tentar Novamente <i class="fas fa-sync-alt"></i>
      </button>
    </div>
  </div>
</ng-template>

<ng-template #loading>
  <div
    style="height: 80vh"
    class="d-flex align-items-center justify-content-center"
  >
    <div class="loader"></div>
  </div>
</ng-template>
